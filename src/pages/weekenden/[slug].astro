---
import BaseLayout from "../../layouts/BaseLayout.astro";
import type { Journey } from "../../data/content";
import { journeys, weekendDetailPage } from "../../data/content";

export function getStaticPaths() {
  const weekends = journeys.filter((journey) => journey.type === "Weekend");
  return weekends.map((weekend) => ({
    params: { slug: weekend.slug },
    props: { weekend },
  }));
}

const { weekend } = Astro.props as { weekend: Journey };
---

<BaseLayout
  title={`SOLATRAVEL | ${weekend.name}`}
  description={weekend.shortDescription}
>
  <section class="relative bg-base-900 text-white">
    <div
      class="absolute inset-0 opacity-40"
      style={{
        backgroundImage: `url(${weekend.heroImage})`,
        backgroundSize: "cover",
        backgroundPosition: "center",
      }}
    >
    </div>
    <div class="relative max-w-6xl mx-auto px-6 py-24 space-y-6">
      <p class="uppercase text-xs tracking-[0.25em] text-white/70">
        {weekend.type}
      </p>
      <h1 class="text-4xl lg:text-5xl font-semibold">{weekend.name}</h1>
      <div class="flex flex-wrap gap-3 text-sm">
        <span class="px-3 py-1 rounded-full bg-white/15 border border-white/30"
          >{weekend.location}</span
        >
        <span class="px-3 py-1 rounded-full bg-white/15 border border-white/30"
          >{weekend.dates}</span
        >
        <span class="px-3 py-1 rounded-full bg-white/15 border border-white/30"
          >{weekend.price}</span
        >
      </div>
      <div class="flex flex-wrap gap-3">
        <a
          href="#boek-nu"
          class="inline-flex items-center px-5 py-3 rounded-full bg-white text-base-900 font-semibold"
          >{weekendDetailPage.ctaBook}</a
        >
        <a
          href="#praktisch"
          class="inline-flex items-center px-5 py-3 rounded-full border border-white/60 text-white font-semibold"
          >{weekendDetailPage.ctaMoreInfo}</a
        >
      </div>
    </div>
  </section>

  <section class="max-w-6xl mx-auto px-6 py-14 space-y-12">
    <div class="grid lg:grid-cols-2 gap-10">
      <div class="space-y-3">
        {
          weekend.intro.map((paragraph) => (
            <p class="text-base-700 leading-relaxed">{paragraph}</p>
          ))
        }
      </div>
      <div class="space-y-6">
        <div>
          <h2 class="text-xl font-semibold text-base-900">{weekendDetailPage.sectionVoorWie}</h2>
          <ul class="mt-3 space-y-2 text-base-700">
            {
              weekend.audience.map((item) => (
                <li class="flex gap-2">
                  <span class="mt-1 h-2 w-2 rounded-full bg-accent-600" />
                  <span>{item}</span>
                </li>
              ))
            }
          </ul>
        </div>
        <div>
          <h2 class="text-xl font-semibold text-base-900">
            {weekendDetailPage.sectionFocus}
          </h2>
          <ul class="mt-3 space-y-2 text-base-700">
            {
              weekend.focus.map((item) => (
                <li class="flex gap-2">
                  <span class="mt-1 h-2 w-2 rounded-full bg-accent-600" />
                  <span>{item}</span>
                </li>
              ))
            }
          </ul>
        </div>
      </div>
    </div>

    <div class="space-y-4" id="programma">
      <h2 class="text-2xl font-semibold text-base-900">{weekendDetailPage.sectionProgramma}</h2>
      <div class="grid md:grid-cols-3 gap-4">
        {
          weekend.program.map((day) => (
            <div class="p-5 border border-base-200 rounded-2xl bg-white shadow-sm">
              <p class="font-semibold text-base-900">{day.day}</p>
              <ul class="mt-3 space-y-2 text-base-700">
                {day.items.map((item) => (
                  <li class="flex gap-2">
                    <span class="mt-1 h-2 w-2 rounded-full bg-accent-600" />
                    <span>{item}</span>
                  </li>
                ))}
              </ul>
            </div>
          ))
        }
      </div>
    </div>

    <div id="praktisch" class="grid lg:grid-cols-[1fr,1fr] gap-10 items-start">
      <div class="space-y-4">
        <h2 class="text-2xl font-semibold text-base-900">{weekendDetailPage.sectionPraktisch}</h2>
        <div class="grid sm:grid-cols-2 gap-4 text-sm">
          <div class="p-4 rounded-2xl border border-base-200 bg-base-50">
            <p class="font-semibold text-base-900">{weekendDetailPage.practicalLabels.location}</p>
            <p class="text-base-700">{weekend.practical.location}</p>
          </div>
          <div class="p-4 rounded-2xl border border-base-200 bg-base-50">
            <p class="font-semibold text-base-900">{weekendDetailPage.practicalLabels.dates}</p>
            <p class="text-base-700">{weekend.practical.dates}</p>
          </div>
          <div class="p-4 rounded-2xl border border-base-200 bg-base-50">
            <p class="font-semibold text-base-900">{weekendDetailPage.practicalLabels.price}</p>
            <p class="text-base-700">{weekend.practical.price}</p>
          </div>
          <div class="p-4 rounded-2xl border border-base-200 bg-base-50">
            <p class="font-semibold text-base-900">{weekendDetailPage.practicalLabels.participants}</p>
            <p class="text-base-700">{weekend.practical.participants}</p>
          </div>
        </div>
        <div class="grid md:grid-cols-2 gap-4">
          <div class="p-5 border border-base-200 rounded-2xl">
            <p class="font-semibold text-base-900">{weekendDetailPage.practicalLabels.included}</p>
            <ul class="mt-2 space-y-2 text-base-700">
              {
                weekend.practical.included.map((item) => (
                  <li class="flex gap-2">
                    <span class="mt-1 h-2 w-2 rounded-full bg-accent-600" />
                    <span>{item}</span>
                  </li>
                ))
              }
            </ul>
          </div>
          <div class="p-5 border border-base-200 rounded-2xl">
            <p class="font-semibold text-base-900">{weekendDetailPage.practicalLabels.notIncluded}</p>
            <ul class="mt-2 space-y-2 text-base-700">
              {
                weekend.practical.notIncluded.map((item) => (
                  <li class="flex gap-2">
                    <span class="mt-1 h-2 w-2 rounded-full bg-accent-600" />
                    <span>{item}</span>
                  </li>
                ))
              }
            </ul>
          </div>
        </div>
        <div class="p-5 border border-base-200 rounded-2xl bg-base-50">
          <p class="font-semibold text-base-900">{weekendDetailPage.practicalLabels.sleeping}</p>
          <p class="mt-2 text-base-700">{weekend.practical.sleeping}</p>
        </div>
      </div>

      <div class="space-y-6" id="boek-nu">
        <div class="p-6 border border-base-200 rounded-2xl bg-white shadow-sm">
          <h3 class="text-xl font-semibold text-base-900">{weekendDetailPage.bookingForm.title}</h3>
          <p class="text-base-700">
            {weekendDetailPage.bookingForm.description}
          </p>
          <form
            class="mt-4 space-y-4"
            action="mailto:hello@solatravel.be"
            method="post"
            enctype="text/plain"
            onsubmit="handleForm(event)"
          >
            <div class="space-y-1">
              <label class="text-sm font-medium text-base-800" for="naam"
                >{weekendDetailPage.bookingForm.labels.naam}</label
              >
              <input
                id="naam"
                name="Naam"
                required
                type="text"
                class="w-full rounded-lg border-base-300 focus:border-accent-600 focus:ring-accent-600"
              />
            </div>
            <div class="space-y-1">
              <label class="text-sm font-medium text-base-800" for="email"
                >{weekendDetailPage.bookingForm.labels.email}</label
              >
              <input
                id="email"
                name="Email"
                required
                type="email"
                class="w-full rounded-lg border-base-300 focus:border-accent-600 focus:ring-accent-600"
              />
            </div>
            <div class="space-y-1">
              <label class="text-sm font-medium text-base-800" for="telefoon"
                >{weekendDetailPage.bookingForm.labels.telefoon}</label
              >
              <input
                id="telefoon"
                name="Telefoon"
                required
                type="tel"
                class="w-full rounded-lg border-base-300 focus:border-accent-600 focus:ring-accent-600"
              />
            </div>
            <div class="space-y-1">
              <label class="text-sm font-medium text-base-800" for="weekend"
                >{weekendDetailPage.bookingForm.labels.weekend}</label
              >
              <input
                id="weekend"
                name="Gekozen weekend"
                value={weekend.name}
                readonly
                class="w-full rounded-lg border-base-300 bg-base-50"
              />
            </div>
            <button
              type="submit"
              class="w-full inline-flex items-center justify-center rounded-full bg-black text-white font-semibold px-4 py-3 hover:bg-accent-800"
            >
              {weekendDetailPage.bookingForm.submit}
            </button>
            <p data-status class="text-sm text-green-700 hidden">
              {weekendDetailPage.bookingForm.success}
            </p>
          </form>
        </div>

        <div class="p-6 border border-base-200 rounded-2xl bg-base-50">
          <h3 class="text-xl font-semibold text-base-900">
            {weekendDetailPage.interestForm.title}
          </h3>
          <p class="text-base-700">
            {weekendDetailPage.interestForm.description}
          </p>
          <form
            class="mt-4 space-y-4"
            action="mailto:hello@solatravel.be"
            method="post"
            enctype="text/plain"
            onsubmit="handleForm(event)"
          >
            <div class="space-y-1">
              <label
                class="text-sm font-medium text-base-800"
                for="interesse-naam">{weekendDetailPage.interestForm.labels.naam}</label
              >
              <input
                id="interesse-naam"
                name="Naam"
                required
                type="text"
                class="w-full rounded-lg border-base-300 focus:border-accent-600 focus:ring-accent-600"
              />
            </div>
            <div class="space-y-1">
              <label
                class="text-sm font-medium text-base-800"
                for="interesse-email">{weekendDetailPage.interestForm.labels.email}</label
              >
              <input
                id="interesse-email"
                name="Email"
                required
                type="email"
                class="w-full rounded-lg border-base-300 focus:border-accent-600 focus:ring-accent-600"
              />
            </div>
            <div class="space-y-1">
              <label
                class="text-sm font-medium text-base-800"
                for="interesse-telefoon">{weekendDetailPage.interestForm.labels.telefoon}</label
              >
              <input
                id="interesse-telefoon"
                name="Telefoon"
                type="tel"
                class="w-full rounded-lg border-base-300 focus:border-accent-600 focus:ring-accent-600"
              />
            </div>
            <button
              type="submit"
              class="w-full inline-flex items-center justify-center rounded-full border border-base-300 text-base-900 font-semibold px-4 py-3 hover:border-base-500"
            >
              {weekendDetailPage.interestForm.submit}
            </button>
            <p data-status class="text-sm text-green-700 hidden">
              {weekendDetailPage.interestForm.success}
            </p>
          </form>
        </div>
      </div>
    </div>
  </section>

  <script is:inline>
    function handleForm(event) {
      event.preventDefault();
      const status = event.target.querySelector("[data-status]");
      if (status) {
        status.classList.remove("hidden");
      }
      event.target.reset();
    }
  </script>
</BaseLayout>
